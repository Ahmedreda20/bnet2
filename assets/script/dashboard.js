let containers = document.querySelectorAll(".dasboard_box");

var allData = {
  management_users: [
    {
      id: 0,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 0,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 0,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 0,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
    {
      id: 1,
      name: "الحسيني",
      status: "غير متصل",
      email: "elhoussaine.elkhariji@gmail.com",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      type: "بائع",
      account: "عادي",
      actions: {
        pending: false,
        active: true,
      },
    },
  ],
  id_management: [
    {
      id: 0,
      name: "الحسن",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      uri: "assets/images/id.jpg",
      auth: true,
    },
    {
      id: 1,
      name: "الحسن",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      uri: "assets/images/banner_img.png",
      auth: true,
    },
    {
      id: 0,
      name: "الحسن",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      uri: "assets/images/id.jpg",
      auth: true,
    },
    {
      id: 1,
      name: "الحسن",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      uri: "assets/images/banner_img.png",
      auth: true,
    },
    {
      id: 0,
      name: "الحسن",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      uri: "assets/images/id.jpg",
      auth: true,
    },
    {
      id: 1,
      name: "الحسن",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      uri: "assets/images/banner_img.png",
      auth: true,
    },
    {
      id: 0,
      name: "الحسن",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      uri: "assets/images/id.jpg",
      auth: true,
    },
    {
      id: 1,
      name: "الحسن",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      uri: "assets/images/banner_img.png",
      auth: true,
    },
    {
      id: 0,
      name: "الحسن",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      uri: "assets/images/id.jpg",
      auth: true,
    },
    {
      id: 1,
      name: "الحسن",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      uri: "assets/images/banner_img.png",
      auth: true,
    },
  ],
  projects_management: [
    {
      id: 0,
      title: "تصميم شعار شركة",
      buyer: "الحسين",
      vendor: "جمال",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      timing: 2,
      budget: 45.75,
      status: "مكتمل",
      action: {
        auth: false,
        return: false,
      },
    },
    {
      id: 1,
      title: "متجر إلكتروني",
      buyer: "الحسين",
      vendor: "جمال",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      timing: 45,
      budget: 78.75,
      status: "مكتمل",
      action: {
        auth: false,
        return: false,
      },
    },
  ],
  services_management: [
    {
      id: 0,
      title: "تطوير المواقع الإلكترونية",
      buyer: "الحسين",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      status: "نشيطة",
      action: {
        active: false,
        pending: false,
      },
    },
    {
      id: 1,
      title: "تطوير المواقع الإلكترونية",
      buyer: "الحسين",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      status: "نشيطة",
      action: {
        active: false,
        pending: false,
      },
    },
  ],
  transactions: [
    {
      id: 0,
      date: "Aug 22 , 2020 - 10:43:21 PM",
      buyer: "الحسين",
      vendor: "جمال",
      budget: 48.75,
    },
    {
      id: 1,
      date: "Aug 22 , 2020 - 10:43:21 PM",
      buyer: "الحسين",
      vendor: "جمال",
      budget: 48.75,
    },
  ],
  profits: [
    {
      id: 0,
      totalPrice: 1881.23,
      usersBalance: 1872.45,
      totalProfits: 0,
      withdrawProfits: 0,
      holdProfits: 8.78,
      transactionsNum: 1,
    },
    {
      id: 1,
      totalPrice: 1881.23,
      usersBalance: 1872.45,
      totalProfits: 0,
      withdrawProfits: 0,
      holdProfits: 8.78,
      transactionsNum: 1,
    },
  ],
  transfers: [
    {
      id: 0,
      name: "الحسين",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      budget: 10,
      invoice: "assets/images/invoice.jpg",
    },
    {
      id: 2,
      name: "الحسين",
      date: "Aug 22 , 2020 - 10:43:21 PM",
      budget: 10,
      invoice: "assets/images/invoice.jpg",
    },
  ],
};

ActivatePreviewForAuthenticationImage = () => {
  const images_preview = document.querySelectorAll(".id_user_img");
  const image_container_prev = document.querySelector(".image_preview");
  const btn_close = image_container_prev.querySelector(".btn_close");
  const image_prev_co = image_container_prev.querySelector(
    ".id_user_img_preview"
  );
  const image_box = document.querySelector(".img_box");

  images_preview.forEach((image_prev) => {
    image_prev.onclick = ({ target }) => {
      let uri = target.src;
      console.log(target);
      image_container_prev.classList.add("active_preview");
      image_prev_co.src = uri;
    };
  });

  btn_close.onclick = () => {
    image_container_prev.classList.remove("active_preview");
    image_prev_co.src = "";
    image_box.classList.remove("zoom_action");
  };

  image_box.ondblclick = () => {
    image_box.classList.toggle("zoom_action");
  };
};

CollectItemToSetInsidePagination = (pagination_items, pagination_container) => {
  var numItems = pagination_items.length;
  var perPage = 4;
  pagination_items.slice(perPage).hide();

  $(pagination_container).pagination({
    items: numItems,
    itemsOnPage: perPage,
    prevText: "&laquo;",
    nextText: "&raquo;",
    onPageClick: function (pageNumber) {
      var showFrom = perPage * (pageNumber - 1);
      var showTo = showFrom + perPage;
      pagination_items.hide().slice(showFrom, showTo).show();
    },
  });
  console.log(numItems);
};

managementUsers = (items, container, paginationBox) => {
  $(() => {
    $(paginationBox).pagination({
      dataSource: allData[items],
      callback: function (data, pagination) {
        var dataHtml = "";

        $.each(data, function (index, item) {
          dataHtml += `<tr class="data_parent">
                    <td>${item.id}</td>
                    <td>
                      <a
                        href="./user.html"
                        class="username"
                        target="_blank"
                        rel="noopener noreferrer"
                        >${item.name}</a
                      >
                    </td>
                    <td>${item.status}</td>
                    <td>
                      <a
                        href="mailto:${item.email.replace("/s/g", "")}"
                        class="email"
                        target="_blank"
                        rel="noopener noreferrer"
                        >${item.email.replace("/s/g", "")}</a
                      >
                    </td>
                    <td>${item.date}</td>
                    <td>${item.type}</td>
                    <td>${item.account}</td>
                    <td>
                      <input type="checkbox" name="action_user" id="action_user${index}" />
                    </td>
                  </tr>`;
        });

        $(container).html(dataHtml);
      },
    });
  });
};

CollectAuthentications = (items, container, paginationBox) => {
  $(() => {
    $(paginationBox).pagination({
      dataSource: allData[items],
      callback: function (data, pagination) {
        var authentication = "";

        $.each(data, function (index, item) {
          authentication += `<tr>
                  <td>${item.id}</td>
                  <td>${item.name}</td>
                  <td>${item.date}</td>
                  <td>
                    <img
                      src="${item.uri}"
                      alt="id image"
                      class="id_user_img"
                    />
                  </td>
                  <td>${item.auth === true ? "تم" : "لم يتم"}</td>
                </tr>`;
        });

        $(container).html(authentication);
        ActivatePreviewForAuthenticationImage();
      },
    });
  });
};

CollectProjectsManagement = (items, container, paginationBox) => {
  $(() => {
    $(paginationBox).pagination({
      dataSource: allData[items],
      callback: function (data, pagination) {
        var projects_container = "";

        $.each(data, function (index, item) {
          projects_container += `<tr>
                    <td>${item.id}</td>
                    <td><a
                        href="./single_offer.html"
                        class="title"
                        target="_blank"
                        rel="noopener noreferrer"
                        >${item.title}</a
                      ></td>
                    <td>
                    <a
                        href="./user.html"
                        class="username"
                        target="_blank"
                        rel="noopener noreferrer"
                        >${item.buyer}</a
                      
                      </td>
                    <td>
                    <a
                        href="./user.html"
                        class="username"
                        target="_blank"
                        rel="noopener noreferrer"
                        >${item.vendor}</a
                      </td>
                    <td>${item.date}</td>
                    <td>${item.timing}</td>
                    <td>${item.budget} ر.س</td>
                    <td>${item.status}</td>
                    <td><input type="checkbox" name="project_${
                      item.id || index
                    }" id="action_project${item.id || index}" /></td>
            </tr>`;
        });

        $(container).html(projects_container);
      },
    });
  });
};

CollectServicesManagement = (items, container, paginationBox) => {
  $(() => {
    $(paginationBox).pagination({
      dataSource: allData[items],
      callback: function (data, pagination) {
        var projects_container = "";

        $.each(data, function (index, item) {
          projects_container += `<tr>
                <td>${item.id}</td>
                   <td>
                        <a
                        href="./single_service.html"
                        class="title"
                        target="_blank"
                        rel="noopener noreferrer"
                        >
                        ${item.title}
                        </a>
                    </td>
                    <td>
                        <a
                        href="./user.html"
                        class="title"
                        target="_blank"
                        rel="noopener noreferrer"
                        >
                        ${item.buyer}
                        </a>
                    </td>
                   <td>${item.date}</td>
                   <td>${item.status}</td>
                    <td><input type="checkbox" name="project_${
                      item.id || index
                    }" id="action_project${item.id || index}" /></td>
            </tr>`;
        });

        $(container).html(projects_container);
      },
    });
  });
};

CollectTransactions = (items, container, paginationBox) => {
  $(() => {
    $(paginationBox).pagination({
      dataSource: allData[items],
      callback: function (data, pagination) {
        var projects_container = "";

        $.each(data, function (index, item) {
          projects_container += `<tr>
                <td>${item.id}</td>
                <td>${item.date}</td>
                <td>${item.buyer}</td>
                <td>${item.vendor}</td>
                <td>${item.budget}</td>
                </tr>`;
        });

        $(container).html(projects_container);
      },
    });
  });
};

CollectProfits = (items, container, paginationBox) => {
  $(() => {
    $(paginationBox).pagination({
      dataSource: allData[items],
      callback: function (data, pagination) {
        var projects_container = "";

        $.each(data, function (index, item) {
          projects_container += `<tr>
                <td>${item.transactionsNum}</td>
                <td>${item.totalPrice} ر.س</td>
                <td>${item.usersBalance} ر.س</td>
                <td>${item.totalProfits} ر.س</td>
                <td>${item.withdrawProfits} ر.س</td>
                <td>${item.holdProfits} ر.س</td>
                </tr>`;
        });

        $(container).html(projects_container);
      },
    });
  });
};

CollectTransfers = (items, container, paginationBox) => {
  $(() => {
    $(paginationBox).pagination({
      dataSource: allData[items],
      callback: function (data, pagination) {
        var projects_container = "";

        $.each(data, function (index, item) {
          projects_container += `<tr>
                <td>${item.name}</td>
                <td>${item.date}</td>
                <td>${item.budget} ر.س</td>
                <td> <img
                      src="${item.invoice}"
                      alt="id image"
                      class="id_user_img"
                    /></td>
                <td>${item.auth === true ? "تم" : "لم يتم"}</td>
                </tr>`;
        });

        $(container).html(projects_container);
        ActivatePreviewForAuthenticationImage();
      },
    });
  });
};

containers.forEach((container) => {
  const ittype = container.dataset.type;
  console.log(ittype);
  const paginationContainer = document.querySelector(
    `.dasboard_box[data-type="${ittype}"] .pagination_container`
  );
  const setDataInside = document.querySelector(
    `.dasboard_box[data-type="${ittype}"] .data_inside`
  );

  if (ittype === "management_users") {
    managementUsers("management_users", setDataInside, paginationContainer);
  } else if (ittype === "id_management") {
    CollectAuthentications("id_management", setDataInside, paginationContainer);
  } else if (ittype === "projects_management") {
    CollectProjectsManagement(
      "projects_management",
      setDataInside,
      paginationContainer
    );
  } else if (ittype === "services_management") {
    CollectServicesManagement(
      "services_management",
      setDataInside,
      paginationContainer
    );
  } else if (ittype === "transactions") {
    CollectTransactions("transactions", setDataInside, paginationContainer);
  } else if (ittype === "profits") {
    CollectProfits("profits", setDataInside, paginationContainer);
  } else if (ittype === "transfers") {
    CollectTransfers("transfers", setDataInside, paginationContainer);
  }
});
